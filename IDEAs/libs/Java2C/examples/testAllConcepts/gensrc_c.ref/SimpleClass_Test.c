/**************************************************************************
 * This file is generated by Java2C
 **copyright***************************************************************
 *************************************************************************/
#include "SimpleClass_Test.h"
#include <string.h>  //because using memset()
#include <Jc/ReflectionJc.h>   //Reflection concept 
#include <Fwc/fw_Exception.h>  //basic stacktrace concept

/**This is an example for a simple class without interface, but override-able methods.
It based on ObjectJc, because the overriding of methods needs this base class.
The <code>struct</code> in C is defined in the following form:
<pre class="CCode">
typedef struct SimpleClass_Test_t
{
union { ObjectJc object; } base;
int32 x1;
} SimpleClass_Test_s;
</pre>
It contains the base data of <code>ObjectJc</code> wrapped with the <code>union</code>,
because the access to the <code>ObjectJc</code> is written anyway in form <code>ref.base.object</code>.
The <code>struct</code> contains the data.
<br><br>
There are two additional defines for all classes in C:
<pre class="CCode">
typedef struct SimpleClass_Test_Y_t { ObjectArrayJc head; SimpleClass_Test_s data[50]; } SimpleClass_Test_Y;

extern struct ClassJc_t const reflection_SimpleClass_Test_s;
</pre>
<ul>
<li>The first line defines a array structure. It is ready to use always. The number of data is a placeholder.
The structure type is used as a reference anytime. Than the really number of elements in the array
depends from the memory allocation size and it is stored in the head data.
<li>The second line declares the existence of reflection for the class in C.
</ul>
Methods are defined as prototypes in headerfile:
<pre class="CCode">
METHOD_C struct SimpleClass_Test_t* ctorO_SimpleClass_Test(ObjectJc* othis, ThCxt* _thCxt);

typedef int32 MT_addValue_SimpleClass_Test(SimpleClass_Test_s* ythis, int32 value, ThCxt* _thCxt);

METHOD_C int32 addValue_SimpleClass_Test_F(SimpleClass_Test_s* ythis, int32 value, ThCxt* _thCxt);

METHOD_C int32 addValue_SimpleClass_Test(SimpleClass_Test_s* ythis, int32 value, ThCxt* _thCxt);
</pre>
<ul>
<li>The first line is the constructor definition, auto generated.
<li>The second line is the method type definition as a so named <i>C-function pointer type</i>.
It is used in the method table.
<li>The third line declares the final version of the method,
whereas the forth line declares that method definition, which executes a dynamic linked call.
</ul>
The header file contains at last the method table type definition:
<pre class="CCode">
extern const char sign_Mtbl_SimpleClass_Test[]; //marker for methodTable check
typedef struct Mtbl_SimpleClass_Test_t
{ MtblHeadJc head;
MT_addValue_SimpleClass_Test* addValue;
Mtbl_ObjectJc ObjectJc;
} Mtbl_SimpleClass_Test;
</pre>
See {@link org.vishia.java2C.Docu.D_SuperClassesAndInterfaces#D8_gen_MethodTable()}.
*/


const char sign_Mtbl_SimpleClass_Test[] = "SimpleClass_Test"; //to mark method tables of all implementations

typedef struct MtblDef_SimpleClass_Test_t { Mtbl_SimpleClass_Test mtbl; MtblHeadJc end; } MtblDef_SimpleClass_Test;
 extern MtblDef_SimpleClass_Test const mtblSimpleClass_Test;

/*Constructor */
struct SimpleClass_Test_t* ctorO_i_SimpleClass_Test(ObjectJc* othis, int32 value, ThCxt* _thCxt)
{ SimpleClass_Test_s* ythis = (SimpleClass_Test_s*)othis;  //upcasting to the real class.
  STACKTRC_TENTRY("ctorO_SimpleClass_Test");
  checkConsistence_ObjectJc(othis, sizeof(SimpleClass_Test_s), null, _thCxt);  
  setReflection_ObjectJc(othis, &reflection_SimpleClass_Test_s, sizeof(SimpleClass_Test_s));  
  //j2c: Initialize all class variables:
  {
    ythis->x1 = 5;
  }
  { 
    
    ythis->x1 = value;
  }
  STACKTRC_LEAVE;
  return ythis;
}



/*Constructor */
struct SimpleClass_Test_t* ctorO_SimpleClass_Test(ObjectJc* othis, ThCxt* _thCxt)
{ SimpleClass_Test_s* ythis = (SimpleClass_Test_s*)othis;  //upcasting to the real class.
  STACKTRC_TENTRY("ctorO_SimpleClass_Test");
  checkConsistence_ObjectJc(othis, sizeof(SimpleClass_Test_s), null, _thCxt);  
  setReflection_ObjectJc(othis, &reflection_SimpleClass_Test_s, sizeof(SimpleClass_Test_s));  
  //j2c: Initialize all class variables:
  {
    ythis->x1 = 5;
  }
  { 
    
    
  }
  STACKTRC_LEAVE;
  return ythis;
}



/**Add something*/
int32 addValue_SimpleClass_Test_F(SimpleClass_Test_s* ythis, int32 value, ThCxt* _thCxt)
{ 
  STACKTRC_TENTRY("addValue_SimpleClass_Test_F");
  
  { 
    
    ythis->x1 += value;
    { STACKTRC_LEAVE;
      return ythis->x1;
    }
  }
  STACKTRC_LEAVE;
}

/*J2C: dynamic call variant of the override-able method: */
int32 addValue_SimpleClass_Test(SimpleClass_Test_s* ythis, int32 value, ThCxt* _thCxt)
{ Mtbl_SimpleClass_Test const* mtbl = (Mtbl_SimpleClass_Test const*)getMtbl_ObjectJc(&ythis->base.object, sign_Mtbl_SimpleClass_Test);
  return mtbl->addValue(ythis, value, _thCxt);
}


/**Returns the current value. */
int32 getValue_SimpleClass_Test_F(SimpleClass_Test_s* ythis, ThCxt* _thCxt)
{ 
  STACKTRC_TENTRY("getValue_SimpleClass_Test_F");
  
  { 
    
    { STACKTRC_LEAVE;
      return ythis->x1;
    }
  }
  STACKTRC_LEAVE;
}

/*J2C: dynamic call variant of the override-able method: */
int32 getValue_SimpleClass_Test(SimpleClass_Test_s* ythis, ThCxt* _thCxt)
{ Mtbl_SimpleClass_Test const* mtbl = (Mtbl_SimpleClass_Test const*)getMtbl_ObjectJc(&ythis->base.object, sign_Mtbl_SimpleClass_Test);
  return mtbl->getValue(ythis, _thCxt);
}


void finalize_SimpleClass_Test_F(ObjectJc* othis, ThCxt* _thCxt)
{ SimpleClass_Test_s* ythis = (SimpleClass_Test_s*)othis;  //upcasting to the real class.
 STACKTRC_TENTRY("finalize_SimpleClass_Test_F");
  CLEAR_REFJc(ythis->anyRef);
  finalize_ObjectJc_F(&ythis->base.object, _thCxt); //J2C: finalizing the superclass.
  STACKTRC_LEAVE;
}




/**J2C: Reflections and Method-table *************************************************/
const MtblDef_SimpleClass_Test mtblSimpleClass_Test = {
{ { sign_Mtbl_SimpleClass_Test//J2C: Head of methodtable.
  , (struct Size_Mtbl_t*)((2 +2) * sizeof(void*)) //size. NOTE: all elements are standard-pointer-types.
  }
, addValue_SimpleClass_Test_F //addValue
, getValue_SimpleClass_Test_F //getValue
, { { sign_Mtbl_ObjectJc//J2C: Head of methodtable.
    , (struct Size_Mtbl_t*)((5 +2) * sizeof(void*)) //size. NOTE: all elements are standard-pointer-types.
    }
  , clone_ObjectJc_F //clone
  , equals_ObjectJc_F //equals
  , finalize_SimpleClass_Test_F //finalize
  , hashCode_ObjectJc_F //hashCode
  , toString_ObjectJc_F //toString
  }
}, { signEnd_Mtbl_ObjectJc, null } }; //Mtbl


 extern struct ClassJc_t const reflection_ObjectJc;
 static struct superClasses_SimpleClass_Test_s_t
 { ObjectArrayJc head;
   ClassOffset_idxMtblJc data[1];
 }superclasses_SimpleClass_Test_s =
 { CONST_ObjectArrayJc(ClassOffset_idxMtblJc, 1, OBJTYPE_ClassOffset_idxMtblJc, null, null)
 , { {&reflection_ObjectJc, OFFSET_Mtbl(Mtbl_SimpleClass_Test, ObjectJc) }
   }
 };

extern struct ClassJc_t const reflection_SimpleClass_Test_s;
extern struct ClassJc_t const reflection_ObjectJc;
const struct Reflection_Fields_SimpleClass_Test_s_t
{ ObjectArrayJc head; FieldJc data[2];
} reflection_Fields_SimpleClass_Test_s =
{ CONST_ObjectArrayJc(FieldJc, 2, OBJTYPE_FieldJc, null, &reflection_Fields_SimpleClass_Test_s)
, {
     { "anyRef"
    , 0 //nrofArrayElements
    , &reflection_ObjectJc
    , kEnhancedReference_Modifier_reflectJc /*@*/ //bitModifiers
    , (int16)((int32)(&((SimpleClass_Test_s*)(0x1000))->anyRef) - (int32)(SimpleClass_Test_s*)0x1000)
    , 0  //offsetToObjectifcBase
    , &reflection_SimpleClass_Test_s
    }
   , { "x1"
    , 0 //nrofArrayElements
    , REFLECTION_int32
    , 4 << kBitPrimitiv_Modifier_reflectJc //bitModifiers
    , (int16)((int32)(&((SimpleClass_Test_s*)(0x1000))->x1) - (int32)(SimpleClass_Test_s*)0x1000)
    , 0  //offsetToObjectifcBase
    , &reflection_SimpleClass_Test_s
    }
} };
const ClassJc reflection_SimpleClass_Test_s = 
{ CONST_ObjectJc(OBJTYPE_ClassJc + sizeof(ClassJc), &reflection_ObjectJc, &reflection_ClassJc) 
, "SimpleClass_Test_s"
,  0 //position of ObjectJc
, sizeof(SimpleClass_Test_s)
, (FieldJcArray const*)&reflection_Fields_SimpleClass_Test_s
, null //method
, (ClassOffset_idxMtblJcARRAY*)&superclasses_SimpleClass_Test_s //superclass
, null //interfaces
, 0    //modifiers
, &mtblSimpleClass_Test.mtbl.head
};
